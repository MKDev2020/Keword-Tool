<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Keyword Tool by MK</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2rem;
      background: #f9f9f9;
    }

    h1 {
      color: #222;
      text-align: center;
    }

    textarea, input, button {
      width: 100%;
      margin: 10px 0;
      padding: 15px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    textarea {
      font-family: Arial, sans-serif;
      font-size: 16px;
    }

    #output {
      border: 1px solid #ccc;
      background: #fff;
      padding: 1rem;
      margin-top: 20px;
      white-space: pre-wrap;
    }

    .keyword {
      padding: 2px 4px;
      border-radius: 4px;
      font-weight: bold;
      margin: 0 3px;
    }

    .summary-table {
      margin-top: 20px;
      border-collapse: collapse;
      width: 100%;
    }

    .summary-table th, .summary-table td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
    }

    .color-box {
      display: inline-block;
      width: 12px;
      height: 12px;
      margin-right: 6px;
      vertical-align: middle;
      border-radius: 2px;
    }

    /* Larger text areas */
    textarea {
      height: 200px; /* Bigger box */
    }

    button {
      background-color: #4CAF50; /* Green */
      color: white;
      border: none;
      cursor: pointer;
      font-size: 18px;
    }

    button:hover {
      background-color: #45a049;
    }

    h2 {
      margin-top: 30px;
      color: #444;
    }

    .summary-table th {
      background-color: #f2f2f2;
    }

    /* Add styling for each keyword type's color */
    #tableKeywords {
      background-color: #FFD700;  /* Gold */
      color: #222;
    }

    #lsiKeywords {
      background-color: #98C7E4;  /* Light Blue */
      color: #222;
    }

    #sectionKeywords {
      background-color: #D1F7A1;  /* Light Green */
      color: #222;
    }

    button#copyButton:hover {
      background-color: #9b59b6; /* Purple */
    }
  </style>
</head>
<body>
  <h1>Keyword Tool by MK</h1>
  <label>Paste your article here:</label>
  <textarea id="article" rows="10"></textarea>

  <label>Enter Table Keywords (Highlighted in Gold):</label>
  <textarea id="tableKeywords" rows="3"></textarea>

  <label>Enter LSI Keywords (Highlighted in Light Blue):</label>
  <textarea id="lsiKeywords" rows="3"></textarea>

  <label>Enter Section Keywords (Highlighted in Light Green):</label>
  <textarea id="sectionKeywords" rows="3"></textarea>

  <button onclick="highlightKeywords()">Run</button>

  <button id="copyButton" onclick="copyToClipboard()">Copy to Clipboard</button>

  <h2>Highlighted Article</h2>
  <div id="output"></div>

  <h2>Keyword Summary</h2>
  <table class="summary-table" id="summary"></table>

  <script>
    function highlightKeywords() {
      const article = document.getElementById('article').value;
      const tableKeywords = document.getElementById('tableKeywords').value
        .split('\n')
        .map(k => k.trim().toLowerCase())
        .filter(k => k);

      const lsiKeywords = document.getElementById('lsiKeywords').value
        .split('\n')
        .map(k => k.trim().toLowerCase())
        .filter(k => k);

      const sectionKeywords = document.getElementById('sectionKeywords').value
        .split('\n')
        .map(k => k.trim().toLowerCase())
        .filter(k => k);

      // Define specific colors for each type of keyword list
      const keywordColors = {
        table: '#FFD700',  // Gold for Table Keywords
        lsi: '#98C7E4',    // Light Blue for LSI Keywords
        section: '#D1F7A1' // Light Green for Section Keywords
      };

      const summary = {
        table: {},
        lsi: {},
        section: {}
      };

      function highlightKeyword(kw, color) {
        const pattern = new RegExp(`(?<!\\w)${kw}(?!\\w)`, 'gi');
        return (text) => {
          return text.replace(pattern, `<span class="keyword" style="background-color:${color}">${kw}</span>`);
        };
      }

      let workingText = ` ${article} `;
      let highlightedText = workingText;

      // Highlight table keywords
      tableKeywords.forEach(kw => {
        highlightedText = highlightKeyword(kw, keywordColors.table)(highlightedText);
        summary.table[kw] = (summary.table[kw] || 0) + 1;
      });

      // Highlight LSI keywords
      lsiKeywords.forEach(kw => {
        highlightedText = highlightKeyword(kw, keywordColors.lsi)(highlightedText);
        summary.lsi[kw] = (summary.lsi[kw] || 0) + 1;
      });

      // Highlight section-specific keywords
      sectionKeywords.forEach(kw => {
        highlightedText = highlightKeyword(kw, keywordColors.section)(highlightedText);
        summary.section[kw] = (summary.section[kw] || 0) + 1;
      });

      // Display highlighted article
      document.getElementById('output').innerHTML = highlightedText.trim();

      // Build the summary table
      let tableHTML = "<tr><th>Keyword</th><th>Count</th><th>Color</th><th>Type</th></tr>";

      function buildSummaryRow(kw, count, color, type) {
        return `<tr>
                  <td>${kw}</td>
                  <td>${count}</td>
                  <td><span class="color-box" style="background:${color}"></span></td>
                  <td>${type}</td>
                </tr>`;
      }

      // Add table keyword rows
      for (let kw in summary.table) {
        tableHTML += buildSummaryRow(kw, summary.table[kw], keywordColors.table, 'Table Keyword');
      }

      // Add LSI keyword rows
      for (let kw in summary.lsi) {
        tableHTML += buildSummaryRow(kw, summary.lsi[kw], keywordColors.lsi, 'LSI Keyword');
      }

      // Add section keyword rows
      for (let kw in summary.section) {
        tableHTML += buildSummaryRow(kw, summary.section[kw], keywordColors.section, 'Section Keyword');
      }

      document.getElementById('summary').innerHTML = tableHTML;
    }

    function copyToClipboard() {
      const outputText = document.getElementById('output').innerText;
      const textArea = document.createElement('textarea');
      textArea.value = outputText;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
    }
  </script>
</body>
</html>
